import React, { useState } from 'react';\nimport { ArrowLeft, User, Mail, Phone } from 'lucide-react';\nimport StepIndicator, { visaApplicationSteps } from '../components/common/StepIndicator';\nimport PaymentForm from '../components/common/PaymentForm';\n\nconst VisaApplicationFlow = ({ \n  visaDetails = {\n    country: 'Japan',\n    city: 'Tokyo',\n    countryCode: 'JPN',\n    visaType: 'Tourist Visa',\n    processingType: 'Standard',\n    amount: 18702.76\n  },\n  onComplete\n}) => {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [applicationData, setApplicationData] = useState({\n    travelerDetails: {\n      firstName: '',\n      lastName: '',\n      email: '',\n      phone: '',\n      passportNumber: '',\n      nationality: 'Philippines'\n    },\n    paymentDetails: null\n  });\n\n  const handleTravelerDetailsSubmit = (details) => {\n    setApplicationData(prev => ({\n      ...prev,\n      travelerDetails: details\n    }));\n    setCurrentStep(1);\n  };\n\n  const handlePaymentComplete = (paymentData) => {\n    setApplicationData(prev => ({\n      ...prev,\n      paymentDetails: paymentData\n    }));\n    setCurrentStep(2);\n    \n    // Process payment and complete application\n    onComplete?.({\n      ...applicationData,\n      paymentDetails: paymentData,\n      visaDetails\n    });\n  };\n\n  const formatAmount = (amount) => {\n    return new Intl.NumberFormat('en-PH', {\n      style: 'currency',\n      currency: 'PHP',\n      minimumFractionDigits: 2\n    }).format(amount).replace('PHP', '₱');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header Section - Teal background with visa details */}\n      <div className=\"bg-visa-teal-500 text-white p-6\">\n        <div className=\"container mx-auto max-w-4xl\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold\">PHL</div>\n                <div className=\"text-sm opacity-90\">Philippines</div>\n              </div>\n              <div className=\"mx-4\">\n                <div className=\"w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center\">\n                  <ArrowLeft className=\"w-4 h-4 transform rotate-180\" />\n                </div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold\">{visaDetails.countryCode}</div>\n                <div className=\"text-sm opacity-90\">{visaDetails.city}</div>\n              </div>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-sm opacity-90\">VISA APPLICATION</div>\n              <div className=\"text-sm\">Tuesday, Apr 15 2025</div>\n              <div className=\"text-xs opacity-75\">\n                APPLICANTS <span className=\"font-bold\">1</span>\n                {' '} TYPE <span className=\"font-bold\">{visaDetails.visaType}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Step Indicator */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"container mx-auto max-w-4xl px-6 py-4\">\n          <StepIndicator \n            steps={visaApplicationSteps} \n            currentStep={currentStep}\n          />\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"container mx-auto max-w-4xl px-6 py-8\">\n        {currentStep === 0 && (\n          <TravelerDetailsForm \n            onSubmit={handleTravelerDetailsSubmit}\n            initialData={applicationData.travelerDetails}\n          />\n        )}\n        \n        {currentStep === 1 && (\n          <div className=\"max-w-2xl mx-auto\">\n            <PaymentForm \n              amount={visaDetails.amount}\n              onPayment={handlePaymentComplete}\n            />\n          </div>\n        )}\n        \n        {currentStep === 2 && (\n          <ConfirmationScreen \n            applicationData={applicationData}\n            visaDetails={visaDetails}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Traveler Details Form Component\nconst TravelerDetailsForm = ({ onSubmit, initialData }) => {\n  const [formData, setFormData] = useState(initialData);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  const handleChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"bg-white rounded-lg border border-gray-200 p-8\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Traveler Details</h2>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">\n                <User className=\"w-4 h-4 inline mr-2\" />\n                First Name\n              </label>\n              <input\n                type=\"text\"\n                className=\"input-field\"\n                value={formData.firstName}\n                onChange={(e) => handleChange('firstName', e.target.value)}\n                required\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label className=\"form-label\">Last Name</label>\n              <input\n                type=\"text\"\n                className=\"input-field\"\n                value={formData.lastName}\n                onChange={(e) => handleChange('lastName', e.target.value)}\n                required\n              />\n            </div>\n          </div>\n          \n          <div className=\"form-group\">\n            <label className=\"form-label\">\n              <Mail className=\"w-4 h-4 inline mr-2\" />\n              Email Address\n            </label>\n            <input\n              type=\"email\"\n              className=\"input-field\"\n              value={formData.email}\n              onChange={(e) => handleChange('email', e.target.value)}\n              required\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label className=\"form-label\">\n              <Phone className=\"w-4 h-4 inline mr-2\" />\n              Phone Number\n            </label>\n            <input\n              type=\"tel\"\n              className=\"input-field\"\n              value={formData.phone}\n              onChange={(e) => handleChange('phone', e.target.value)}\n              required\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label className=\"form-label\">Passport Number</label>\n            <input\n              type=\"text\"\n              className=\"input-field\"\n              value={formData.passportNumber}\n              onChange={(e) => handleChange('passportNumber', e.target.value.toUpperCase())}\n              required\n            />\n          </div>\n          \n          <button type=\"submit\" className=\"btn-apply-now w-full\">\n            Continue to Payment\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// Confirmation Screen Component\nconst ConfirmationScreen = ({ applicationData, visaDetails }) => {\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"bg-white rounded-lg border border-gray-200 p-8 text-center\">\n        <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n          <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n          </svg>\n        </div>\n        \n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Application Submitted Successfully!</h2>\n        \n        <p className=\"text-gray-600 mb-6\">\n          Your visa application for {visaDetails.country} has been submitted. \n          You will receive a confirmation email shortly.\n        </p>\n        \n        <div className=\"bg-gray-50 rounded-lg p-6 mb-6 text-left\">\n          <h3 className=\"font-semibold text-gray-900 mb-4\">Application Summary</h3>\n          <div className=\"space-y-2 text-sm\">\n            <div className=\"flex justify-between\">\n              <span>Applicant:</span>\n              <span>{applicationData.travelerDetails.firstName} {applicationData.travelerDetails.lastName}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>Destination:</span>\n              <span>{visaDetails.country}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>Visa Type:</span>\n              <span>{visaDetails.visaType}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>Amount Paid:</span>\n              <span className=\"font-semibold\">₱{visaDetails.amount.toLocaleString()}</span>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex gap-4\">\n          <button className=\"btn-outline flex-1\">\n            Download Receipt\n          </button>\n          <button className=\"btn-apply-now flex-1\">\n            Track Application\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VisaApplicationFlow;"